import{g as u,r as _,a as l,c,i as E}from"./header-zVkTQlWD.js";import{m as b,s as v}from"./selection-button-group-BqLQ2r7n.js";import{c as x,d as h,w as L,q as P,g as w}from"./firebase-D0A0i6wl.js";import{u as m}from"./use-query-DC4Lgv9E.js";import{r as T}from"./render-img-cards-D1ai8UE9.js";async function y(e,t){try{let n=x(h,"cards-experts");const r=[];return e&&e!=="Везде"&&r.push(L("location","==",e)),n=P(n,...r),(await w(n)).docs.map(i=>({id:i.id,...i.data()}))}catch(n){return console.error("Ошибка при получении сотрудников:",n),[]}}function q(e){const t=u(".employees-tubs__cards");if(!e.length){t.innerHTML='<div class="employees-tubs__empty-cards">Нечего не найденно!</div>';return}t.innerHTML="",e.forEach(n=>{t.insertAdjacentHTML("beforeend",T(n))})}async function M(){const e=u(".employees-tubs__buttons-block"),t=m(),n=t.getParam("location")?t.getParam("location"):"Везде",r=t.getParam("Expert")?t.getParam("Expert"):"Все специализации",i=(await y(n)).reduce((o,{expertise:a})=>(o.includes(a)||o.push(a),o),[]);i.unshift("Все специализации"),e.innerHTML="",i.forEach(o=>{const a=_("button",["button_list-item","button_all-service",r===o?"button_list-item-active":""]);a.innerText=o,e.append(a)})}function Q(e){console.log("innerLoader target: "+e);const t=u(`.${e}`);t.innerHTML='<span class="loader"></span>'}async function f(){const e=u(".employees-tubs__content"),t=m(),n=t.getParam("location"),r=t.getParam("Expert");e.style.opacity="0";let s;n||t.setParam("location","Везде"),r||t.setParam("Expert","Все специализации");try{s=await y(t.getParam("location")),d(s,r),await M(s),await i(),B(n),e.style.opacity="1"}catch(o){console.error(o)}function i(){const o=l(".button_list-item");o.forEach(a=>{a.addEventListener("click",async()=>{t.setParam("Expert",a.innerText),o.forEach(p=>{const g=t.getParam("Expert");p.innerText===g?c(p,"add","button_list-item-active"):c(p,"remove","button_list-item-active")}),d(s,a.innerText)})})}}function d(e,t){Q("employees-tubs__cards");const n=e.filter(r=>t==="Все специализации"?!0:t===r.expertise);q(n)}function B(e){l(".button-group__button").forEach(n=>{n.innerText===e?(c(n,"add","button-group__button_active"),b(n)):c(n,"remove","button-group__button_active")})}async function H(){const e=l(".button_list-item"),t=m();e.forEach(n=>{n.addEventListener("click",async()=>{t.setParam("Expert",n.innerText),e.forEach(r=>{const s=t.getParam("Expert");r.innerText===s?c(r,"add","button_list-item-active"):c(r,"remove","button_list-item-active")})})})}async function C(){const e=u(".button-group__container"),t=l(".button-group__button",e),n=m();t.forEach(r=>{r.addEventListener("click",()=>{n.setParam("location",r.innerText),f()})})}document.addEventListener("DOMContentLoaded",async e=>{E(),v(),await f(),await H(),await C()});
